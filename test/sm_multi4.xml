<?xml version='1.0'?>
<xc:Partition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
              xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
              xmlns:xc="http://xdaq.web.cern.ch/xdaq/xsd/2004/XMLConfiguration-30">

    <i2o:protocol xmlns:i2o="http://xdaq.web.cern.ch/xdaq/xsd/2004/I2OConfiguration-30">
       <i2o:target class="evf::FUEventProcessor" instance="0" tid="23"/>
       <i2o:target class="SMi2oSender" instance="0" tid="25"/>
       <i2o:target class="SMi2oSender" instance="1" tid="125"/>
       <i2o:target class="SMi2oSender" instance="2" tid="225"/>
       <i2o:target class="testStorageManager" instance="0" tid="24"/>
    </i2o:protocol>

   <xc:Context url="http://cmsroc3.fnal.gov:1972">
       <xc:Endpoint protocol="tcp" service="i2o"
          hostname="cmsroc3.fnal.gov" port="30000" network="tcp1"/>

        <xc:Application class="evf::FUEventProcessor" id="21" instance="0" network="tcp1">
           <properties xmlns="urn:xdaq-application:FUEventProcessor" xsi:type="soapenc:Struct">

                    <parameterSet xsi:type="xsd:string">file:/uscms/home/cheung/work/xml2/fu_stage1.cfi</parameterSet>
                  </properties>

                </xc:Application>
       <xc:Application class="SMi2oSender" id="20" instance="0" network="tcp1">
       </xc:Application>
       <xc:Application class="PeerTransportTCP" id="30" network="tcp1">
           <properties xmlns="urn:xdaq-application:PeerTransportTCP" xsi:type="soapenc:Struct">
              <autoSize xsi:type="xsd:boolean">true</autoSize>
              <maxPacketSize xsi:type="xsd:unsignedLong">262144</maxPacketSize>
              <!-- poolName xsi:type="xsd:string">RoundtripSendPool</poolName -->
           </properties>
       </xc:Application>
       <xc:Module>/uscmst1/prod/sw/cms/slc3_ia32_gcc323/external/xdaq/3.5/lib/libpttcp.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterProcessor.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterStorageManager.so</xc:Module>
   </xc:Context>

   <!-- FU sender two -->
   <xc:Context url="http://cmsroc6.fnal.gov:1972">
       <xc:Endpoint protocol="tcp" service="i2o"
          hostname="cmsroc6.fnal.gov" port="30000" network="tcp1"/>

        <xc:Application class="evf::FUEventProcessor" id="121" instance="0" network="tcp1">
           <properties xmlns="urn:xdaq-application:FUEventProcessor" xsi:type="soapenc:Struct">

                    <parameterSet xsi:type="xsd:string">file:/uscms/home/cheung/work/xml/fu_stage1_fu2.cfi</parameterSet>
                  </properties>

                </xc:Application>
       <xc:Application class="SMi2oSender" id="20" instance="1" network="tcp1">
       </xc:Application>
       <xc:Application class="PeerTransportTCP" id="130" network="tcp1">
           <properties xmlns="urn:xdaq-application:PeerTransportTCP" xsi:type="soapenc:Struct">
              <autoSize xsi:type="xsd:boolean">true</autoSize>
              <maxPacketSize xsi:type="xsd:unsignedLong">262144</maxPacketSize>
              <!-- poolName xsi:type="xsd:string">RoundtripSendPool</poolName -->
           </properties>
       </xc:Application>
       <xc:Module>/uscmst1/prod/sw/cms/slc3_ia32_gcc323/external/xdaq/3.5/lib/libpttcp.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterProcessor.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterStorageManager.so</xc:Module>
   </xc:Context>

   <!-- FU sender three -->
   <xc:Context url="http://cmsroc7.fnal.gov:1972">
       <xc:Endpoint protocol="tcp" service="i2o"
          hostname="cmsroc7.fnal.gov" port="30000" network="tcp1"/>

        <xc:Application class="evf::FUEventProcessor" id="221" instance="0" network="tcp1">
           <properties xmlns="urn:xdaq-application:FUEventProcessor" xsi:type="soapenc:Struct">

                    <parameterSet xsi:type="xsd:string">file:/uscms/home/cheung/work/xml/fu_stage1_fu3.cfi</parameterSet>
                  </properties>

                </xc:Application>
       <xc:Application class="SMi2oSender" id="20" instance="2" network="tcp1">
       </xc:Application>
       <xc:Application class="PeerTransportTCP" id="230" network="tcp1">
           <properties xmlns="urn:xdaq-application:PeerTransportTCP" xsi:type="soapenc:Struct">
              <autoSize xsi:type="xsd:boolean">true</autoSize>
              <maxPacketSize xsi:type="xsd:unsignedLong">262144</maxPacketSize>
              <!-- poolName xsi:type="xsd:string">RoundtripSendPool</poolName -->
           </properties>
       </xc:Application>
       <xc:Module>/uscmst1/prod/sw/cms/slc3_ia32_gcc323/external/xdaq/3.5/lib/libpttcp.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterProcessor.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterStorageManager.so</xc:Module>
   </xc:Context>

    <!-- Declare a context that contain applcation -->
    <xc:Context id = "1" url="http://cmsroc2.fnal.gov:1972">
       <xc:Endpoint protocol="tcp" service="i2o"
          hostname="cmsroc2.fnal.gov" port="60000" network="tcp1"/>

      <!--- Setting up the XDAQ monitor -->
      <xc:Application class="Monitor" id="66"  network="local">
        <properties xmlns="urn:xdaq-application:Monitor" xsi:type="soapenc:Struct">
          <inprofile xsi:type="soapenc:Array" soapenc:arrayType="xsd:ur-type[1]">
            <item xsi:type="xsd:string" soapenc:position="[0]">$CMSSW_BASE/src/EventFilter/StorageManager/test/sm.flash</item>
          </inprofile>
          <useDiscovery xsi:type="xsd:boolean">false</useDiscovery>
        </properties>
      </xc:Application>
      <xc:Module>$XDAQ_ROOT/lib/libmonitor.so</xc:Module>

       <!-- Declare a SMSender application -->
       <xc:Application class="testStorageManager" id="29" instance="0" network="tcp1">
<properties xmlns="urn:xdaq-application:testStorageManager" xsi:type="soapenc:Struct">
                    <FUparameterSet xsi:type="xsd:string">file:/uscms/home/cheung/work/xml2/fu_stage1noout.cfi</FUparameterSet>
                    <STparameterSet xsi:type="xsd:string">file:/uscms/home/cheung/work/xml2/sm_stage1noout.cfi</STparameterSet>
                    <oneinN xsi:type="xsd:integer">1</oneinN>
                    <runNumber xsi:type="xsd:unsignedLong">0</runNumber>
                    <streamerOnly xsi:type="xsd:string">true</streamerOnly>
                    <filePath xsi:type="xsd:string">/scratch2/cheung</filePath>
                    <mailboxPath xsi:type="xsd:string">/scratch2/cheung/mbox</mailboxPath>
                    <setupLabel xsi:type="xsd:string">mtcc</setupLabel>
                    <streamLabel xsi:type="xsd:string">A</streamLabel>
                    <maxFileSize xsi:type="xsd:integer">1073741824</maxFileSize>
                    <highWaterMark xsi:type="xsd:double">0.9</highWaterMark>
</properties>

       </xc:Application>
       <xc:Application class="PeerTransportTCP" id="31" network="tcp1">
           <properties xmlns="urn:xdaq-application:PeerTransportTCP" xsi:type="soapenc:Struct">
              <autoSize xsi:type="xsd:boolean">true</autoSize>
              <maxPacketSize xsi:type="xsd:unsignedLong">262144</maxPacketSize>
           </properties>
       </xc:Application>

       <xc:Module>/uscmst1/prod/sw/cms/slc3_ia32_gcc323/external/xdaq/3.5/lib/libpttcp.so</xc:Module>
       <xc:Module>/uscms/home/cheung/work/CMSSW_1_1_0_pre1/lib/slc3_ia32_gcc323/libEventFilterStorageManagertestStorageManager.so</xc:Module>
       </xc:Context>

</xc:Partition>
