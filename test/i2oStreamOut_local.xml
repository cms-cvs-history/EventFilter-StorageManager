<?xml version='1.0'?>
<xc:Partition xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
              xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
              xmlns:xc="http://xdaq.web.cern.ch/xdaq/xsd/2004/XMLConfiguration-30">

    <i2o:protocol xmlns:i2o="http://xdaq.web.cern.ch/xdaq/xsd/2004/I2OConfiguration-30">
       <i2o:target class="evf::FUEventProcessor" instance="0" tid="23"/>
       <i2o:target class="SMi2oSender" instance="0" tid="25"/>
       <i2o:target class="testI2OReceiver" instance="0" tid="24"/>
    </i2o:protocol>

   <xc:Context url="http://192.168.198.91:1972">

        <xc:Application class="evf::FUEventProcessor" id="21" instance="0" network="local">
           <properties xmlns="urn:xdaq-application:FUEventProcessor" xsi:type="soapenc:Struct">
                    <parameterSet xsi:type="xsd:string">
		       process TEST1 = {
		         path p = { m1, a1, out2 }
                         source = EmptySource {untracked int32 maxEvents = 20}
                         module m1 = StreamThingProducer {
                           int32 array_size = 20000
                           int32 instance_count=5 }
                         module a1 = StreamThingAnalyzer { string product_to_get="m1" }
                         module dummyunpacker = PoolOutputModule {
                         string fileName = "/afs/cern.ch/user/h/hcheung/scratch0/CMSSW_0_3_0_pre2/ciccio.root"}
                         module out = StreamTestConsumer {
                           int32 max_event_size = 2000000 int32 max_queue_depth = 5
                           PSet consumer_config = { string fileName = "test_xdaqstream_myout.dat" } }
                         module out2 = I2OTestConsumer {
                           int32 max_event_size = 2000000 int32 max_queue_depth = 5 
                           PSet consumer_config = { string DestinationName = "I2OReceiver" } }
                       }
                    </parameterSet>
          </properties>
       </xc:Application>
       <xc:Application class="SMi2oSender" id="20" instance="0" network="local">
       </xc:Application>
       <xc:Application class="testI2OReceiver" id="29" instance="0" network="local">
       </xc:Application>

       <xc:Module>/uscms/prod/sw/cms/external/xdaq/XDAQ_3_3/slc3_ia32_gcc323/lib/linux/x86/libpttcp.so</xc:Module>
       <xc:Module>/cmsonline/home/cheung/cms/CMSSW_0_3_0_pre2/lib/slc3_ia32_gcc323/libEventFilterProcessor.so</xc:Module>
       <xc:Module>/cmsonline/home/cheung/cms/CMSSW_0_3_0_pre2/lib/slc3_ia32_gcc323/libEventFilterStorageManager.so</xc:Module>
       <xc:Module>/cmsonline/home/cheung/cms/CMSSW_0_3_0_pre2/lib/slc3_ia32_gcc323/libEventFilterStorageManagertestI2OReceiver.so</xc:Module>
   </xc:Context>
</xc:Partition>
